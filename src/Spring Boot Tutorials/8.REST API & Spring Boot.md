# REST API & Spring Boot: Complete Tutorial Guide

## Table of Contents

1.  REST API/Services
2.  SOAP vs REST
3.  RESTful Services Introduction
4.  REST Principles
5.  JSON Introduction
6.  XML vs JSON
7.  JACKSON API
8.  HTTP Protocol & Methods
9.  HTTP Status Codes
10.  HTTP Headers
11.  POSTMAN
12.  Swagger in Spring Boot
13.  REST Client - RestTemplate
14.  Exception Handling
15. Request Body Validations
16.  View Resolvers
17.  Form-Based Application
----------

## REST API/Services

### What is REST?

**REST**  (Representational State Transfer) is an architectural style for designing networked applications. It uses HTTP protocol to communicate between client and server.

### Memory Visualization üß†

Think of REST API as a  **Restaurant Menu System**:

-   **Menu**  = Available API endpoints
-   **Waiter**  = HTTP Protocol
-   **Order**  = HTTP Request
-   **Dish**  = Response Data
-   **Kitchen**  = Server/Backend

### Key Concepts

```
Client                    Server
  |                         |
  |---HTTP Request--------->|
  |    (GET /users/1)       |
  |                         |
  |<--HTTP Response---------|
  |    (User JSON Data)     |
```

### Simple Example

java

```java
// REST Controller
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @GetMapping("/{id}")
    public User getUser(@PathVariable Long id) {
        return new User(id, "John Doe", "john@example.com");
    }
}
```

----------

## SOAP vs REST

### Analogy üé≠

**SOAP**  = Formal Letter (Strict format, envelope, headers, body)  **REST**  = Text Message (Simple, flexible, direct)

### Comparison Table
<img width="820" height="290" alt="image" src="https://github.com/user-attachments/assets/6ccf40e3-b4b4-46a2-ba1c-f1333df7c247" />




### Example Comparison

**SOAP Request:**

xml

```xml
<?xml version="1.0"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
  <soap:Header></soap:Header>
  <soap:Body>
    <GetUser>
      <UserId>123</UserId>
    </GetUser>
  </soap:Body>
</soap:Envelope>
```

**REST Request:**

```
GET /api/users/123
```

----------

## RESTful Services Introduction

### What Makes a Service RESTful?

Think of RESTful service as a  **Library System**:

-   Books (Resources) have unique IDs (URIs)
-   You can Browse (GET), Borrow (POST), Update (PUT), Return (DELETE)
-   Each action is independent (Stateless)

### Key Characteristics

1.  **Client-Server Architecture**
2.  **Stateless Communication**
3.  **Cacheable**
4.  **Uniform Interface**
5.  **Layered System**

### Simple RESTful Service Example

java

```java
@RestController
@RequestMapping("/api/books")
public class BookController {
    
    private List<Book> books = new ArrayList<>();
    
    // GET - Retrieve all books
    @GetMapping
    public List<Book> getAllBooks() {
        return books;
    }
    
    // GET - Retrieve single book
    @GetMapping("/{id}")
    public Book getBook(@PathVariable Long id) {
        return books.stream()
            .filter(b -> b.getId().equals(id))
            .findFirst()
            .orElse(null);
    }
    
    // POST - Create new book
    @PostMapping
    public Book createBook(@RequestBody Book book) {
        books.add(book);
        return book;
    }
    
    // PUT - Update book
    @PutMapping("/{id}")
    public Book updateBook(@PathVariable Long id, @RequestBody Book book) {
        Book existing = getBook(id);
        if (existing != null) {
            existing.setTitle(book.getTitle());
            existing.setAuthor(book.getAuthor());
        }
        return existing;
    }
    
    // DELETE - Remove book
    @DeleteMapping("/{id}")
    public void deleteBook(@PathVariable Long id) {
        books.removeIf(b -> b.getId().equals(id));
    }
}
```

----------

## REST Principles

### The 6 Guiding Principles

#### 1.  **Client-Server Architecture**

**Analogy**: Restaurant (Client orders, Kitchen cooks)

java

```java
// Client (Frontend)
fetch('/api/users')
  .then(response => response.json())

// Server (Backend)
@RestController
public class UserController {
    @GetMapping("/api/users")
    public List<User> getUsers() { ... }
}
```

#### 2.  **Stateless**

**Memory Aid**: Each request is like a new phone call - you must introduce yourself every time.

java

```java
// Each request contains all necessary information
@GetMapping("/api/orders")
public List<Order> getOrders(
    @RequestHeader("Authorization") String token,
    @RequestParam int page
) {
    // Token sent with EVERY request
    // Server doesn't remember previous requests
    return orderService.getOrders(token, page);
}
```

#### 3.  **Cacheable**

**Analogy**: Saving frequently dialed numbers in your phone

java

```java
@GetMapping("/api/products/{id}")
@Cacheable("products")
public Product getProduct(@PathVariable Long id) {
    // Response can be cached
    return productService.findById(id);
}
```

#### 4.  **Uniform Interface**

**Principle**: Consistent URL patterns and HTTP methods

```
GET    /api/users       ‚Üí Get all users
GET    /api/users/1     ‚Üí Get user with id=1
POST   /api/users       ‚Üí Create new user
PUT    /api/users/1     ‚Üí Update user with id=1
DELETE /api/users/1     ‚Üí Delete user with id=1
```

#### 5.  **Layered System**

**Visualization**:

```
Client ‚Üí Load Balancer ‚Üí API Gateway ‚Üí Service ‚Üí Database
```

#### 6.  **Code on Demand (Optional)**

Server can send executable code (JavaScript) to client.

----------

## JSON Introduction

### What is JSON?

**JSON**  (JavaScript Object Notation) - A lightweight data interchange format.

### Analogy üóÇÔ∏è

Think of JSON as a  **Filing Cabinet**:

-   Curly braces  `{}`  = Folders
-   Square brackets  `[]`  = Multiple documents in a folder
-   Key-value pairs = Labeled documents

### JSON Structure

json

```json
{
  "id": 1,
  "name": "John Doe",
  "email": "john@example.com",
  "age": 30,
  "active": true,
  "address": {
    "street": "123 Main St",
    "city": "New York",
    "zipCode": "10001"
  },
  "hobbies": ["reading", "gaming", "coding"],
  "spouse": null
}
```

### Data Types in JSON

json

```json
{
  "string": "Hello",
  "number": 42,
  "float": 3.14,
  "boolean": true,
  "null": null,
  "object": {"key": "value"},
  "array": [1, 2, 3]
}
```

### Simple Java Example

java

```java
public class User {
    private Long id;
    private String name;
    private String email;
    private List<String> hobbies;
    
    // Getters and Setters
}

// This Java object converts to:
{
  "id": 1,
  "name": "John",
  "email": "john@example.com",
  "hobbies": ["reading", "coding"]
}
```

----------

## XML vs JSON

### Visual Comparison üìä

**Same Data in Both Formats:**

**XML:**

xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<user>
    <id>1</id>
    <name>John Doe</name>
    <email>john@example.com</email>
    <hobbies>
        <hobby>reading</hobby>
        <hobby>coding</hobby>
    </hobbies>
    <address>
        <city>New York</city>
        <zipCode>10001</zipCode>
    </address>
</user>
```

**JSON:**

json

```json
{
  "id": 1,
  "name": "John Doe",
  "email": "john@example.com",
  "hobbies": ["reading", "coding"],
  "address": {
    "city": "New York",
    "zipCode": "10001"
  }
}
```

### Comparison Table
<img width="826" height="328" alt="image" src="https://github.com/user-attachments/assets/d63fb756-4817-4aea-a46e-bbaac8ef4aab" />



### When to Use What?

**Use JSON when:**

-   Working with web APIs
-   Need fast parsing
-   Working with JavaScript
-   Data size matters

**Use XML when:**

-   Need document validation (schemas)
-   Complex document structures
-   Legacy systems
-   Need comments in data

----------

## JACKSON API

### What is Jackson?

Jackson is a Java library for converting Java objects to JSON and vice versa.

### Analogy üîÑ

Think of Jackson as a  **Universal Translator**:

-   Java Object = English
-   JSON = Spanish
-   Jackson = Translator

### Core Annotations

#### 1.  `@JsonProperty`

java

```java
public class User {
    @JsonProperty("user_id")
    private Long id;  // JSON will have "user_id" instead of "id"
    
    @JsonProperty("full_name")
    private String name;
}

// Output JSON:
{
  "user_id": 1,
  "full_name": "John Doe"
}
```

#### 2.  `@JsonIgnore`

java

```java
public class User {
    private Long id;
    private String name;
    
    @JsonIgnore
    private String password;  // Won't appear in JSON
}

// Output JSON:
{
  "id": 1,
  "name": "John Doe"
  // password is hidden
}
```

#### 3.  `@JsonFormat`

java

```java
public class Order {
    private Long id;
    
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
    private Date orderDate;
}

// Output JSON:
{
  "id": 1,
  "orderDate": "2025-10-26 14:30:00"
}
```

#### 4.  `@JsonInclude`

java

```java
@JsonInclude(JsonInclude.Include.NON_NULL)
public class Product {
    private Long id;
    private String name;
    private String description;  // Won't show if null
}

// If description is null:
{
  "id": 1,
  "name": "Laptop"
  // description is excluded
}
```

### Converting Java Object to JSON

#### Method 1: Using ObjectMapper

java

```java
import com.fasterxml.jackson.databind.ObjectMapper;

public class JacksonExample {
    public static void main(String[] args) throws Exception {
        // Create Java object
        User user = new User(1L, "John Doe", "john@example.com");
        
        // Create ObjectMapper
        ObjectMapper mapper = new ObjectMapper();
        
        // Convert Java to JSON String
        String jsonString = mapper.writeValueAsString(user);
        System.out.println(jsonString);
        // Output: {"id":1,"name":"John Doe","email":"john@example.com"}
        
        // Convert Java to JSON File
        mapper.writeValue(new File("user.json"), user);
        
        // Pretty Print JSON
        String prettyJson = mapper.writerWithDefaultPrettyPrinter()
                                  .writeValueAsString(user);
        System.out.println(prettyJson);
        /*
        {
          "id" : 1,
          "name" : "John Doe",
          "email" : "john@example.com"
        }
        */
    }
}
```

#### Method 2: Automatic in Spring Boot

java

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @GetMapping("/{id}")
    public User getUser(@PathVariable Long id) {
        User user = new User(id, "John Doe", "john@example.com");
        // Spring Boot automatically converts to JSON
        return user;
    }
}
```

### Converting JSON to Java Object

#### Method 1: From JSON String

java

```java
public class JacksonExample {
    public static void main(String[] args) throws Exception {
        String jsonString = """
            {
              "id": 1,
              "name": "John Doe",
              "email": "john@example.com"
            }
            """;
        
        ObjectMapper mapper = new ObjectMapper();
        
        // Convert JSON String to Java Object
        User user = mapper.readValue(jsonString, User.class);
        
        System.out.println(user.getName());  // John Doe
    }
}
```

#### Method 2: From JSON File

java

```java
ObjectMapper mapper = new ObjectMapper();
User user = mapper.readValue(new File("user.json"), User.class);
```

#### Method 3: From JSON Array

java

```java
String jsonArray = """
    [
      {"id": 1, "name": "John"},
      {"id": 2, "name": "Jane"}
    ]
    """;

ObjectMapper mapper = new ObjectMapper();
List<User> users = mapper.readValue(jsonArray, 
    new TypeReference<List<User>>() {});
```

#### Method 4: Automatic in Spring Boot

java

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @PostMapping
    public User createUser(@RequestBody User user) {
        // Spring Boot automatically converts JSON to User object
        System.out.println(user.getName());
        return user;
    }
}
```

### Complete Example with Nested Objects

java

```java
// Java Classes
public class Address {
    private String street;
    private String city;
    private String zipCode;
    
    // Getters, Setters, Constructors
}

public class User {
    private Long id;
    private String name;
    private String email;
    private Address address;
    private List<String> hobbies;
    
    // Getters, Setters, Constructors
}

// Conversion Example
public class CompleteExample {
    public static void main(String[] args) throws Exception {
        // Create nested object
        Address address = new Address("123 Main St", "New York", "10001");
        User user = new User(1L, "John Doe", "john@example.com");
        user.setAddress(address);
        user.setHobbies(Arrays.asList("reading", "coding"));
        
        ObjectMapper mapper = new ObjectMapper();
        
        // Java to JSON
        String json = mapper.writerWithDefaultPrettyPrinter()
                           .writeValueAsString(user);
        System.out.println(json);
        
        // JSON to Java
        User parsedUser = mapper.readValue(json, User.class);
        System.out.println(parsedUser.getAddress().getCity());  // New York
    }
}
```

----------

## HTTP Protocol & Methods

### What is HTTP?

**HTTP**  (HyperText Transfer Protocol) - The foundation of data communication on the web.

### Analogy üì¨

Think of HTTP as the  **Postal Service**:

-   **Method**  = Type of mail (letter, package, registered mail)
-   **URL**  = Delivery address
-   **Headers**  = Envelope information
-   **Body**  = Contents of the envelope
-   **Status Code**  = Delivery confirmation

### HTTP Request Structure

```
POST /api/users HTTP/1.1              ‚Üê Request Line (Method, URI, Version)
Host: example.com                      ‚Üê Headers
Content-Type: application/json
Authorization: Bearer token123

{                                      ‚Üê Body
  "name": "John Doe",
  "email": "john@example.com"
}
```

### HTTP Methods (CRUD Operations)

#### 1.  **GET**  - Retrieve/Read

**Analogy**: Looking up a phone number in a directory

java

```java
@GetMapping("/api/users")
public List<User> getAllUsers() {
    return userService.findAll();
}

@GetMapping("/api/users/{id}")
public User getUser(@PathVariable Long id) {
    return userService.findById(id);
}

// Query Parameters
@GetMapping("/api/users")
public List<User> searchUsers(
    @RequestParam String name,
    @RequestParam(required = false) Integer age
) {
    return userService.search(name, age);
}
```

**URL Example:**

```
GET /api/users?name=John&age=30
```

#### 2.  **POST**  - Create

**Analogy**: Adding a new contact to your phone

java

```java
@PostMapping("/api/users")
public User createUser(@RequestBody User user) {
    return userService.save(user);
}
```

**Request:**

http

```http
POST /api/users
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john@example.com"
}
```

#### 3.  **PUT**  - Update/Replace

**Analogy**: Replacing an entire contact card

java

```java
@PutMapping("/api/users/{id}")
public User updateUser(
    @PathVariable Long id,
    @RequestBody User user
) {
    user.setId(id);
    return userService.update(user);
}
```

**Request:**

http

```http
PUT /api/users/1
Content-Type: application/json

{
  "name": "John Updated",
  "email": "johnupdated@example.com"
}
```

#### 4.  **PATCH**  - Partial Update

**Analogy**: Updating just the phone number of a contact

java

```java
@PatchMapping("/api/users/{id}")
public User partialUpdate(
    @PathVariable Long id,
    @RequestBody Map<String, Object> updates
) {
    return userService.partialUpdate(id, updates);
}
```

**Request:**

http

```http
PATCH /api/users/1
Content-Type: application/json

{
  "email": "newemail@example.com"
}
```

#### 5.  **DELETE**  - Remove

**Analogy**: Deleting a contact

java

```java
@DeleteMapping("/api/users/{id}")
public void deleteUser(@PathVariable Long id) {
    userService.delete(id);
}
```

**Request:**

http

```http
DELETE /api/users/1
```

### Method Comparison Table
<img width="806" height="237" alt="image" src="https://github.com/user-attachments/assets/3a2ecd54-024e-4a58-ae29-3edc955aad8f" />



**Idempotent**: Multiple identical requests have the same effect as one request  **Safe**: Doesn't modify server state

### Complete REST Controller Example

java

```java
@RestController
@RequestMapping("/api/products")
public class ProductController {
    
    @Autowired
    private ProductService productService;
    
    // GET all products
    @GetMapping
    public ResponseEntity<List<Product>> getAllProducts() {
        List<Product> products = productService.findAll();
        return ResponseEntity.ok(products);
    }
    
    // GET single product
    @GetMapping("/{id}")
    public ResponseEntity<Product> getProduct(@PathVariable Long id) {
        Product product = productService.findById(id);
        if (product == null) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok(product);
    }
    
    // GET with query parameters
    @GetMapping("/search")
    public ResponseEntity<List<Product>> searchProducts(
        @RequestParam String name,
        @RequestParam(required = false) Double minPrice,
        @RequestParam(required = false) Double maxPrice
    ) {
        List<Product> products = productService.search(name, minPrice, maxPrice);
        return ResponseEntity.ok(products);
    }
    
    // POST - Create
    @PostMapping
    public ResponseEntity<Product> createProduct(@RequestBody Product product) {
        Product saved = productService.save(product);
        return ResponseEntity.status(HttpStatus.CREATED).body(saved);
    }
    
    // PUT - Full Update
    @PutMapping("/{id}")
    public ResponseEntity<Product> updateProduct(
        @PathVariable Long id,
        @RequestBody Product product
    ) {
        if (!productService.exists(id)) {
            return ResponseEntity.notFound().build();
        }
        product.setId(id);
        Product updated = productService.update(product);
        return ResponseEntity.ok(updated);
    }
    
    // PATCH - Partial Update
    @PatchMapping("/{id}")
    public ResponseEntity<Product> partialUpdate(
        @PathVariable Long id,
        @RequestBody Map<String, Object> updates
    ) {
        if (!productService.exists(id)) {
            return ResponseEntity.notFound().build();
        }
        Product updated = productService.partialUpdate(id, updates);
        return ResponseEntity.ok(updated);
    }
    
    // DELETE
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteProduct(@PathVariable Long id) {
        if (!productService.exists(id)) {
            return ResponseEntity.notFound().build();
        }
        productService.delete(id);
        return ResponseEntity.noContent().build();
    }
}
```

----------

## HTTP Status Codes

### Analogy üö¶

Think of HTTP status codes as  **Traffic Lights & Signs**:

-   **2xx**  = Green light (Success)
-   **3xx**  = Detour sign (Redirection)
-   **4xx**  = Stop sign (Client error)
-   **5xx**  = Road closed (Server error)

### Status Code Categories

```
1xx - Informational  (Hold on...)
2xx - Success        (‚úì Done!)
3xx - Redirection    (‚Üí Go here)
4xx - Client Error   (‚úó You messed up)
5xx - Server Error   (‚úó We messed up)
```

### Common Status Codes

#### 2xx Success Codes

java

```java
// 200 OK - Standard success
@GetMapping("/users/{id}")
public ResponseEntity<User> getUser(@PathVariable Long id) {
    return ResponseEntity.ok(user);  // 200
}

// 201 Created - Resource created
@PostMapping("/users")
public ResponseEntity<User> createUser(@RequestBody User user) {
    User saved = userService.save(user);
    return ResponseEntity.status(HttpStatus.CREATED).body(saved);  // 201
}

// 204 No Content - Success but no data to return
@DeleteMapping("/users/{id}")
public ResponseEntity<Void> deleteUser(@PathVariable Long id) {
    userService.delete(id);
    return ResponseEntity.noContent().build();  // 204
}
```

#### 3xx Redirection Codes

java

```java
// 301 Moved Permanently
@GetMapping("/old-api/users")
public ResponseEntity<Void> oldEndpoint() {
    return ResponseEntity
        .status(HttpStatus.MOVED_PERMANENTLY)
        .location(URI.create("/api/users"))
        .build();  // 301
}

// 304 Not Modified - Use cached version
```

#### 4xx Client Error Codes

java

```java
// 400 Bad Request - Invalid data
@PostMapping("/users")
public ResponseEntity<?> createUser(@RequestBody User user) {
    if (user.getName() == null) {
        return ResponseEntity
            .badRequest()
            .body("Name is required");  // 400
    }
    return ResponseEntity.ok(userService.save(user));
}

// 401 Unauthorized - Authentication required
@GetMapping("/admin/users")
public ResponseEntity<?> getUsers(@RequestHeader("Authorization") String token) {
    if (token == null || !isValid(token)) {
        return ResponseEntity
            .status(HttpStatus.UNAUTHORIZED)
            .body("Please login");  // 401
    }
    return ResponseEntity.ok(userService.findAll());
}

// 403 Forbidden - Authenticated but not authorized
@DeleteMapping("/users/{id}")
public ResponseEntity<?> deleteUser(@PathVariable Long id, Principal principal) {
    if (!hasAdminRole(principal)) {
        return ResponseEntity
            .status(HttpStatus.FORBIDDEN)
            .body("Admin access required");  // 403
    }
    userService.delete(id);
    return ResponseEntity.noContent().build();
}

// 404 Not Found - Resource doesn't exist
@GetMapping("/users/{id}")
public ResponseEntity<User> getUser(@PathVariable Long id) {
    User user = userService.findById(id);
    if (user == null) {
        return ResponseEntity.notFound().build();  // 404
    }
    return ResponseEntity.ok(user);
}

// 409 Conflict - Request conflicts with current state
@PostMapping("/users")
public ResponseEntity<?> createUser(@RequestBody User user) {
    if (userService.existsByEmail(user.getEmail())) {
        return ResponseEntity
            .status(HttpStatus.CONFLICT)
            .body("Email already exists");  // 409
    }
    return ResponseEntity.ok(userService.save(user));
}
```

#### 5xx Server Error Codes

java

```java
// 500 Internal Server Error
@GetMapping("/users")
public ResponseEntity<?> getUsers() {
    try {
        return ResponseEntity.ok(userService.findAll());
    } catch (Exception e) {
        return ResponseEntity
            .status(HttpStatus.INTERNAL_SERVER_ERROR)
            .body("Something went wrong");  // 500
    }
}

// 503 Service Unavailable
@GetMapping("/users")
public ResponseEntity<?> getUsers() {
    if (!databaseService.isAvailable()) {
        return ResponseEntity
            .status(HttpStatus.SERVICE_UNAVAILABLE)
            .body("Database is down");  // 503
    }
    return ResponseEntity.ok(userService.findAll());
}
```

### Complete Status Code Reference
<img width="807" height="817" alt="image" src="https://github.com/user-attachments/assets/28abc86b-de91-437f-888d-57910ec248bc" />



### Best Practices Example

java

```java
@RestController
@RequestMapping("/api/orders")
public class OrderController {
    
    @PostMapping
    public ResponseEntity<?> createOrder(@RequestBody Order order) {
        // 400 - Validation error
        if (order.getItems() == null || order.getItems().isEmpty()) {
            return ResponseEntity
                .badRequest()
                .body(new ErrorResponse("Order must have items"));
        }
        
        // 409 - Conflict
        if (orderService.isDuplicate(order.getOrderNumber())) {
            return ResponseEntity
                .status(HttpStatus.CONFLICT)
                .body(new ErrorResponse("Order number already exists"));
        }
        
        try {
            // 201 - Created successfully
            Order saved = orderService.save(order);
            return ResponseEntity
                .status(HttpStatus.CREATED)
                .body(saved);
        } catch (PaymentException e) {
            // 402 - Payment Required
            return ResponseEntity
                .status(HttpStatus.PAYMENT_REQUIRED)
                .body(new ErrorResponse("Payment failed"));
        } catch (Exception e) {
            // 500 - Server error
            return ResponseEntity
                .status(HttpStatus.INTERNAL_SERVER_ERROR)
                .body(new ErrorResponse("Order processing failed"));
        }
    }
}
```

----------

## HTTP Headers

### What are Headers?

Headers are metadata sent with HTTP requests and responses.

### Analogy üìß

Think of Headers as  **Envelope Information**:

-   **To/From**  = Host, Origin headers
-   **Stamp Type**  = Content-Type
-   **Tracking Number**  = Request ID
-   **Delivery Instructions**  = Cache-Control
-   **Security Seal**  = Authorization

### Request Headers

#### 1.  **Content-Type**  - Format of request body

java

```java
@PostMapping("/api/users")
public User createUser(
    @RequestHeader("Content-Type") String contentType,
    @RequestBody User user
) {
    System.out.println(contentType);  // application/json
    return userService.save(user);
}
```

**Common Content-Types:**

```
application/json
application/xml
application/x-www-form-urlencoded
multipart/form-data
text/plain
text/html
```

#### 2.  **Authorization**  - Authentication token

java

```java
@GetMapping("/api/profile")
public User getProfile(
    @RequestHeader("Authorization") String token
) {
    // token = "Bearer eyJhbGciOiJIUzI1NiIs..."
    String jwt = token.replace("Bearer ", "");
    User user = authService.validateToken(jwt);
    return user;
}
```

#### 3.  **Accept**  - Expected response format

java

```java
@GetMapping("/api/users/{id}")
public ResponseEntity<?> getUser(
    @PathVariable Long id,
    @RequestHeader("Accept") String accept
) {
    User user = userService.findById(id);
    
    if (accept.contains("application/json")) {
        return ResponseEntity.ok(user);  // Return JSON
    } else if (accept.contains("application/xml")) {
        return ResponseEntity.ok(convertToXml(user));  // Return XML
    }
    return ResponseEntity.ok(user);
}
```

#### 4.  **Custom Headers**

java

```java
@GetMapping("/api/data")
public ResponseEntity<String> getData(
    @RequestHeader("X-Request-ID") String requestId,
    @RequestHeader("X-User-Agent") String userAgent
) {
    System.out.println("Request ID: " + requestId);
    System.out.println("User Agent: " + userAgent);
    return ResponseEntity.ok("Data retrieved");
}
```

### Response Headers

#### Adding Response Headers

java

```java
@GetMapping("/api/users/{id}")
public ResponseEntity<User> getUser(@PathVariable Long id) {
    User user = userService.findById(id);
    
    return ResponseEntity.ok()
        .header("X-Total-Count", "100")
        .header("X-Page-Number", "1")
        .header("Cache-Control", "max-age=3600")
        .body(user);
}
```

#### Setting Headers with HttpHeaders

java

```java
@GetMapping("/api/users")
public ResponseEntity<List<User>> getUsers() {
    List<User> users = userService.findAll();
    
    HttpHeaders headers = new HttpHeaders();
    headers.add("X-Total-Count", String.valueOf(users.size()));
    headers.add("X-Custom-Header", "Custom Value");
    headers.setContentType(MediaType.APPLICATION_JSON);
    
    return new ResponseEntity<>(users, headers, HttpStatus.OK);
}
```

### Common HTTP Headers Reference
<img width="816" height="377" alt="image" src="https://github.com/user-attachments/assets/c179530a-3af3-4537-8eb7-a17ed199358a" />
<img width="820" height="337" alt="image" src="https://github.com/user-attachments/assets/bda9457e-7ea1-4dd6-8d37-60fec2ffdc13" />



### Complete Example with Multiple Headers

java

```java
@RestController
@RequestMapping("/api/files")
public class FileController {
    
    @PostMapping("/upload")
    public ResponseEntity<String> uploadFile(
        @RequestHeader("Content-Type") String contentType,
        @RequestHeader("Content-Length") long contentLength,
        @RequestHeader("Authorization") String auth,
        @RequestBody byte[] fileData
    ) {
        // Validate content type
        if (!contentType.startsWith("image/")) {
            return ResponseEntity
                .badRequest()
                .body("Only images allowed");
        }
        
        // Validate size (10MB limit)
        if (contentLength > 10 * 1024 * 1024) {
            return ResponseEntity
                .status(HttpStatus.PAYLOAD_TOO_LARGE)
                .body("File too large");
        }
        
        // Validate authentication
        if (!isValidToken(auth)) {
            return ResponseEntity
                .status(HttpStatus.UNAUTHORIZED)
                .body("Invalid token");
        }
        
        // Save file
        String fileId = fileService.save(fileData);
        
        // Return with custom headers
        HttpHeaders headers = new HttpHeaders();
        headers.add("X-File-ID", fileId);
        headers.add("X-Upload-Time", String.valueOf(System.currentTimeMillis()));
        headers.setLocation(URI.create("/api/files/" + fileId));
        
        return new ResponseEntity<>("File uploaded", headers, HttpStatus.CREATED);
    }
    
    @GetMapping("/{id}")
    public ResponseEntity<byte[]> downloadFile(
        @PathVariable String id,
        @RequestHeader(value = "If-None-Match", required = false) String etag
    ) {
        FileInfo fileInfo = fileService.getFileInfo(id);
        
        // Check if client has latest version
        if (etag != null && etag.equals(fileInfo.getETag())) {
            return ResponseEntity
                .status(HttpStatus.NOT_MODIFIED)
                .build();
        }
        
        byte[] fileData = fileService.getFileData(id);
        
        return ResponseEntity.ok()
            .header("Content-Type", fileInfo.getContentType())
            .header("Content-Disposition", "attachment; filename=\"" + fileInfo.getFileName() + "\"")
            .header("ETag", fileInfo.getETag())
            .header("Cache-Control", "max-age=86400")
            .body(fileData);
    }
}
```

----------

## POSTMAN

### What is Postman?

Postman is a tool for testing REST APIs without writing code.

### Analogy üìÆ

Think of Postman as a  **Test Kitchen**:

-   You can prepare requests (recipes)
-   Test endpoints (taste dishes)
-   Save collections (recipe books)
-   Share with team (cookbook sharing)

### Basic Usage Steps

#### 1. Creating a Simple GET Request

```
1. Open Postman
2. Click "New" ‚Üí "HTTP Request"
3. Select method: GET
4. Enter URL: http://localhost:8080/api/users
5. Click "Send"
```

#### 2. GET Request with Path Variable

```
URL: http://localhost:8080/api/users/1
Method: GET
```

#### 3. GET Request with Query Parameters

```
URL: http://localhost:8080/api/users?name=John&age=30
Method: GET

Or use Params tab:
Key: name    Value: John
Key: age     Value: 30
```

#### 4. POST Request with JSON Body

```
URL: http://localhost:8080/api/users
Method: POST
Headers:
  Content-Type: application/json
Body ‚Üí raw ‚Üí JSON:
{
  "name": "John Doe",
  "email": "john@example.com",
  "age": 30
}
```

#### 5. PUT Request (Update)

```
URL: http://localhost:8080/api/users/1
Method: PUT
Headers:
  Content-Type: application/json
Body ‚Üí raw ‚Üí JSON:
{
  "name": "John Updated",
  "email": "johnupdated@example.com",
  "age": 31
}
```

#### 6. DELETE Request

```
URL: http://localhost:8080/api/users/1
Method: DELETE
```

### Adding Headers in Postman

```
Headers tab:
Key: Authorization    Value: Bearer eyJhbGciOiJIUzI1NiIs...
Key: Content-Type     Value: application/json
Key: Accept           Value: application/json
Key: X-Custom-Header  Value: CustomValue
```

### Using Variables in Postman

#### Environment Variables

```
1. Click Environment dropdown (top-right)
2. Create new environment: "Development"
3. Add variables:
   - baseUrl: http://localhost:8080
   - token: your-auth-token

4. Use in requests:
   URL: {{baseUrl}}/api/users
   Header: Authorization: Bearer {{token}}
```

### Creating Collections

```
1. Click "New" ‚Üí "Collection"
2. Name it: "User API Tests"
3. Add requests to collection:
   - GET All Users
   - GET User by ID
   - CREATE User
   - UPDATE User
   - DELETE User
4. Save collection
5. Export/Share with team
```

### Testing API Responses

#### Response Validation

javascript

```javascript
// Tests tab in Postman
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

pm.test("Response has name field", function () {
    var jsonData = pm.response.json();
    pm.expect(jsonData.name).to.exist;
});

pm.test("Response time is less than 200ms", function () {
    pm.expect(pm.response.responseTime).to.be.below(200);
});
```

### Sample Postman Collection Structure

```
üìÅ E-Commerce API
  üìÅ Authentication
    ‚Üí POST Login
    ‚Üí POST Register
    ‚Üí POST Refresh Token
  üìÅ Users
    ‚Üí GET All Users
    ‚Üí GET User by ID
    ‚Üí POST Create User
    ‚Üí PUT Update User
    ‚Üí DELETE User
  üìÅ Products
    ‚Üí GET All Products
    ‚Üí GET Product by ID
    ‚Üí POST Create Product
    ‚Üí PUT Update Product
    ‚Üí DELETE Product
  üìÅ Orders
    ‚Üí GET All Orders
    ‚Üí GET Order by ID
    ‚Üí POST Create Order
    ‚Üí PUT Update Order Status
```

----------

## Swagger in Spring Boot

### What is Swagger?

Swagger (OpenAPI) automatically generates interactive API documentation.

### Analogy üìñ

Think of Swagger as an  **Interactive Restaurant Menu**:

-   Shows all available dishes (endpoints)
-   Describes ingredients (parameters)
-   Let's you order directly (test endpoints)
-   Updates automatically when chef adds new dishes (code changes)

### Setting Up Swagger

#### Step 1: Add Dependencies (pom.xml)

xml

```xml
<!-- For Spring Boot 3.x -->
<dependency>
    <groupId>org.springdoc</groupId>
    <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
    <version>2.2.0</version>
</dependency>
```

#### Step 2: Configuration (Optional)

java

```java
@Configuration
public class SwaggerConfig {
    
    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
            .info(new Info()
                .title("User Management API")
                .version("1.0")
                .description("API for managing users")
                .contact(new Contact()
                    .name("Your Name")
                    .email("your.email@example.com"))
                .license(new License()
                    .name("Apache 2.0")
                    .url("http://www.apache.org/licenses/LICENSE-2.0")));
    }
}
```

#### Step 3: Access Swagger UI

```
Start your application and visit:
http://localhost:8080/swagger-ui.html

Or:
http://localhost:8080/swagger-ui/index.html
```

### Adding API Documentation

#### Controller Level Documentation

java

```java
@RestController
@RequestMapping("/api/users")
@Tag(name = "User Management", description = "APIs for managing users")
public class UserController {
    
    @Operation(
        summary = "Get all users",
        description = "Returns a list of all users in the system"
    )
    @ApiResponses(value = {
        @ApiResponse(
            responseCode = "200",
            description = "Successfully retrieved users",
            content = @Content(
                mediaType = "application/json",
                schema = @Schema(implementation = User.class)
            )
        ),
        @ApiResponse(
            responseCode = "500",
            description = "Internal server error"
        )
    })
    @GetMapping
    public List<User> getAllUsers() {
        return userService.findAll();
    }
    
    @Operation(summary = "Get user by ID")
    @ApiResponses(value = {
        @ApiResponse(responseCode = "200", description = "User found"),
        @ApiResponse(responseCode = "404", description = "User not found")
    })
    @GetMapping("/{id}")
    public ResponseEntity<User> getUserById(
        @Parameter(description = "ID of user to retrieve", required = true)
        @PathVariable Long id
    ) {
        User user = userService.findById(id);
        if (user == null) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok(user);
    }
    
    @Operation(summary = "Create new user")
    @ApiResponse(responseCode = "201", description = "User created successfully")
    @PostMapping
    public ResponseEntity<User> createUser(
        @Parameter(description = "User object to create", required = true)
        @RequestBody User user
    ) {
        User saved = userService.save(user);
        return ResponseEntity.status(HttpStatus.CREATED).body(saved);
    }
    
    @Operation(summary = "Update user")
    @PutMapping("/{id}")
    public ResponseEntity<User> updateUser(
        @Parameter(description = "User ID")
        @PathVariable Long id,
        @Parameter(description = "Updated user data")
        @RequestBody User user
    ) {
        user.setId(id);
        User updated = userService.update(user);
        return ResponseEntity.ok(updated);
    }
    
    @Operation(summary = "Delete user")
    @ApiResponse(responseCode = "204", description = "User deleted successfully")
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteUser(
        @Parameter(description = "User ID to delete")
        @PathVariable Long id
    ) {
        userService.delete(id);
        return ResponseEntity.noContent().build();
    }
}
```

#### Model Documentation

java

```java
@Schema(description = "User entity representing a system user")
public class User {
    
    @Schema(description = "Unique identifier", example = "1", accessMode = Schema.AccessMode.READ_ONLY)
    private Long id;
    
    @Schema(description = "User's full name", example = "John Doe", required = true, maxLength = 100)
    private String name;
    
    @Schema(description = "User's email address", example = "john@example.com", required = true)
    private String email;
    
    @Schema(description = "User's age", example = "30", minimum = "0", maximum = "150")
    private Integer age;
    
    @Schema(description = "User's account status", example = "true")
    private Boolean active;
    
    // Getters and Setters
}
```

### Complete Swagger Example

java

```java
@RestController
@RequestMapping("/api/products")
@Tag(name = "Product API", description = "Endpoints for managing products")
public class ProductController {
    
    @Autowired
    private ProductService productService;
    
    @Operation(
        summary = "Search products",
        description = "Search products by name, category, and price range"
    )
    @GetMapping("/search")
    public ResponseEntity<List<Product>> searchProducts(
        @Parameter(description = "Product name to search")
        @RequestParam(required = false) String name,
        
        @Parameter(description = "Product category")
        @RequestParam(required = false) String category,
        
        @Parameter(description = "Minimum price")
        @RequestParam(required = false) Double minPrice,
        
        @Parameter(description = "Maximum price")
        @RequestParam(required = false) Double maxPrice
    ) {
        List<Product> products = productService.search(name, category, minPrice, maxPrice);
        return ResponseEntity.ok(products);
    }
}

@Schema(description = "Product information")
public class Product {
    
    @Schema(description = "Product ID", example = "1")
    private Long id;
    
    @Schema(description = "Product name", example = "Laptop", required = true)
    private String name;
    
    @Schema(description = "Product description", example = "High-performance laptop")
    private String description;
    
    @Schema(description = "Product price", example = "999.99", required = true)
    private Double price;
    
    @Schema(description = "Product category", example = "Electronics")
    private String category;
    
    @Schema(description = "Stock quantity", example = "50")
    private Integer stock;
    
    // Getters and Setters
}
```

### Customizing Swagger UI

#### application.properties

properties

```properties
# Swagger UI path
springdoc.swagger-ui.path=/api-docs

# Sort endpoints
springdoc.swagger-ui.operationsSorter=method

# Enable/disable try it out
springdoc.swagger-ui.tryItOutEnabled=true

# API docs path
springdoc.api-docs.path=/v3/api-docs

# Packages to scan
springdoc.packagesToScan=com.example.controller

# Paths to include
springdoc.pathsToMatch=/api/**
```

----------

## REST Client - RestTemplate

### What is RestTemplate?

RestTemplate is a Spring class for making HTTP requests to consume REST APIs.

### Analogy üìû

Think of RestTemplate as a  **Phone Service**:

-   You dial (make request)
-   Wait for answer (response)
-   Get information (data)
-   Handle busy signals (errors)

### Configuration

#### Bean Configuration

java

```java
@Configuration
public class RestTemplateConfig {
    
    @Bean
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }
}
```

### Basic Operations

#### 1. GET Request - Retrieve Data

**Method 1: getForObject**

java

```java
@Service
public class UserClientService {
    
    @Autowired
    private RestTemplate restTemplate;
    
    private static final String BASE_URL = "https://jsonplaceholder.typicode.com";
    
    // Get single object
    public User getUser(Long id) {
        String url = BASE_URL + "/users/" + id;
        User user = restTemplate.getForObject(url, User.class);
        return user;
    }
    
    // Get list of objects
    public List<User> getAllUsers() {
        String url = BASE_URL + "/users";
        User[] users = restTemplate.getForObject(url, User[].class);
        return Arrays.asList(users);
    }
}
```

**Method 2: getForEntity (with status code)**

java

```java
public User getUserWithStatus(Long id) {
    String url = BASE_URL + "/users/" + id;
    
    ResponseEntity<User> response = restTemplate.getForEntity(url, User.class);
    
    System.out.println("Status Code: " + response.getStatusCode());
    System.out.println("Headers: " + response.getHeaders());
    
    return response.getBody();
}
```

**With Path Variables:**

java

```java
public User getUser(Long id) {
    String url = BASE_URL + "/users/{id}";
    User user = restTemplate.getForObject(url, User.class, id);
    return user;
}
```

**With Query Parameters:**

java

```java
public List<User> searchUsers(String name, Integer age) {
    String url = BASE_URL + "/users?name={name}&age={age}";
    
    Map<String, Object> params = new HashMap<>();
    params.put("name", name);
    params.put("age", age);
    
    User[] users = restTemplate.getForObject(url, User[].class, params);
    return Arrays.asList(users);
}
```

#### 2. POST Request - Create Data

**Method 1: postForObject**

java

```java
public User createUser(User newUser) {
    String url = BASE_URL + "/users";
    User createdUser = restTemplate.postForObject(url, newUser, User.class);
    return createdUser;
}
```

**Method 2: postForEntity**

java

```java
public User createUserWithStatus(User newUser) {
    String url = BASE_URL + "/users";
    
    ResponseEntity<User> response = restTemplate.postForEntity(url, newUser, User.class);
    
    System.out.println("Status: " + response.getStatusCode());
    System.out.println("Location: " + response.getHeaders().getLocation());
    
    return response.getBody();
}
```

**With Headers:**

java

```java
public User createUserWithHeaders(User newUser) {
    String url = BASE_URL + "/users";
    
    HttpHeaders headers = new HttpHeaders();
    headers.setContentType(MediaType.APPLICATION_JSON);
    headers.set("Authorization", "Bearer token123");
    
    HttpEntity<User> request = new HttpEntity<>(newUser, headers);
    
    ResponseEntity<User> response = restTemplate.postForEntity(url, request, User.class);
    return response.getBody();
}
```

#### 3. PUT Request - Update Data

java

```java
public void updateUser(Long id, User updatedUser) {
    String url = BASE_URL + "/users/{id}";
    restTemplate.put(url, updatedUser, id);
}

// With response
public User updateUserWithResponse(Long id, User updatedUser) {
    String url = BASE_URL + "/users/{id}";
    
    HttpEntity<User> request = new HttpEntity<>(updatedUser);
    
    ResponseEntity<User> response = restTemplate.exchange(
        url,
        HttpMethod.PUT,
        request,
        User.class,
        id
    );
    
    return response.getBody();
}
```

#### 4. DELETE Request - Remove Data

java

```java
public void deleteUser(Long id) {
    String url = BASE_URL + "/users/{id}";
    restTemplate.delete(url, id);
}

// With response status
public boolean deleteUserWithStatus(Long id) {
    String url = BASE_URL + "/users/{id}";
    
    ResponseEntity<Void> response = restTemplate.exchange(
        url,
        HttpMethod.DELETE,
        null,
        Void.class,
        id
    );
    
    return response.getStatusCode() == HttpStatus.NO_CONTENT;
}
```

### Using exchange() Method (Most Flexible)

java

```java
public User performRequest(Long id, HttpMethod method, User userData) {
    String url = BASE_URL + "/users/{id}";
    
    HttpHeaders headers = new HttpHeaders();
    headers.setContentType(MediaType.APPLICATION_JSON);
    headers.set("Authorization", "Bearer token123");
    
    HttpEntity<User> request = new HttpEntity<>(userData, headers);
    
    ResponseEntity<User> response = restTemplate.exchange(
        url,
        method,  // GET, POST, PUT, DELETE
        request,
        User.class,
        id
    );
    
    return response.getBody();
}
```

### Error Handling

java

```java
@Service
public class UserClientService {
    
    @Autowired
    private RestTemplate restTemplate;
    
    public User getUserSafely(Long id) {
        try {
            String url = "https://api.example.com/users/" + id;
            return restTemplate.getForObject(url, User.class);
            
        } catch (HttpClientErrorException e) {
            // 4xx errors
            if (e.getStatusCode() == HttpStatus.NOT_FOUND) {
                System.out.println("User not found");
            } else if (e.getStatusCode() == HttpStatus.UNAUTHORIZED) {
                System.out.println("Unauthorized access");
            }
            throw e;
            
        } catch (HttpServerErrorException e) {
            // 5xx errors
            System.out.println("Server error: " + e.getMessage());
            throw e;
            
        } catch (ResourceAccessException e) {
            // Network errors
            System.out.println("Network error: " + e.getMessage());
            throw e;
        }
    }
}
```

### Complete RestTemplate Example

java

```java
@Service
public class ProductClientService {
    
    @Autowired
    private RestTemplate restTemplate;
    
    private static final String API_URL = "http://localhost:8080/api/products";
    
    // GET all products
    public List<Product> getAllProducts() {
        try {
            ResponseEntity<Product[]> response = restTemplate.getForEntity(
                API_URL,
                Product[].class
            );
            return Arrays.asList(response.getBody());
        } catch (Exception e) {
            System.err.println("Error fetching products: " + e.getMessage());
            return Collections.emptyList();
        }
    }
    
    // GET product by ID
    public Product getProductById(Long id) {
        String url = API_URL + "/{id}";
        
        try {
            ResponseEntity<Product> response = restTemplate.getForEntity(
                url,
                Product.class,
                id
            );
            return response.getBody();
        } catch (HttpClientErrorException.NotFound e) {
            System.err.println("Product not found with id: " + id);
            return null;
        }
    }
    
    // POST - Create product
    public Product createProduct(Product product) {
        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_JSON);
        
        HttpEntity<Product> request = new HttpEntity<>(product, headers);
        
        ResponseEntity<Product> response = restTemplate.postForEntity(
            API_URL,
            request,
            Product.class
        );
        
        return response.getBody();
    }
    
    // PUT - Update product
    public Product updateProduct(Long id, Product product) {
        String url = API_URL + "/{id}";
        
        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_JSON);
        
        HttpEntity<Product> request = new HttpEntity<>(product, headers);
        
        ResponseEntity<Product> response = restTemplate.exchange(
            url,
            HttpMethod.PUT,
            request,
            Product.class,
            id
        );
        
        return response.getBody();
    }
    
    // DELETE product
    public boolean deleteProduct(Long id) {
        String url = API_URL + "/{id}";
        
        try {
            restTemplate.delete(url, id);
            return true;
        } catch (HttpClientErrorException e) {
            System.err.println("Error deleting product: " + e.getMessage());
            return false;
        }
    }
    
    // Search with query parameters
    public List<Product> searchProducts(String name, Double minPrice, Double maxPrice) {
        String url = API_URL + "/search?name={name}&minPrice={minPrice}&maxPrice={maxPrice}";
        
        Map<String, Object> params = new HashMap<>();
        params.put("name", name);
        params.put("minPrice", minPrice);
        params.put("maxPrice", maxPrice);
        
        try {
            ResponseEntity<Product[]> response = restTemplate.getForEntity(
                url,
                Product[].class,
                params
            );
            return Arrays.asList(response.getBody());
        } catch (Exception e) {
            System.err.println("Search error: " + e.getMessage());
            return Collections.emptyList();
        }
    }
}
```

### Testing RestTemplate Client

java

```java
@SpringBootTest
public class ProductClientServiceTest {
    
    @Autowired
    private ProductClientService productClient;
    
    @Test
    public void testGetAllProducts() {
        List<Product> products = productClient.getAllProducts();
        assertNotNull(products);
        assertTrue(products.size() > 0);
    }
    
    @Test
    public void testCreateProduct() {
        Product newProduct = new Product();
        newProduct.setName("Test Product");
        newProduct.setPrice(99.99);
        
        Product created = productClient.createProduct(newProduct);
        
        assertNotNull(created);
        assertNotNull(created.getId());
        assertEquals("Test Product", created.getName());
    }
}
```

----------

## Exception Handling in MVC

### Why Exception Handling?

To provide consistent, user-friendly error responses instead of default error pages.

### Analogy üè•

Think of Exception Handling as a  **Hospital Emergency Department**:

-   Different specialists (handlers) for different problems
-   Triage system (exception hierarchy)
-   Consistent treatment protocols (error response format)
-   Patient-friendly explanations (error messages)

### Method 1: @ExceptionHandler (Controller Level)

java

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    @GetMapping("/{id}")
    public User getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        if (user == null) {
            throw new UserNotFoundException("User not found with id: " + id);
        }
        return user;
    }
    
    // Handle specific exception in this controller
    @ExceptionHandler(UserNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleUserNotFound(UserNotFoundException ex) {
        ErrorResponse error = new ErrorResponse(
            HttpStatus.NOT_FOUND.value(),
            ex.getMessage(),
            System.currentTimeMillis()
        );
        return new ResponseEntity<>(error, HttpStatus.NOT_FOUND);
    }
    
    @ExceptionHandler(Exception.class)
    public ResponseEntity<ErrorResponse> handleGeneralException(Exception ex) {
        ErrorResponse error = new ErrorResponse(
            HttpStatus.INTERNAL_SERVER_ERROR.value(),
            "An error occurred: " + ex.getMessage(),
            System.currentTimeMillis()
        );
        return new ResponseEntity<>(error, HttpStatus.INTERNAL_SERVER_ERROR);
    }
}
```

### Method 2: @ControllerAdvice (Global Exception Handling)

#### Error Response Model

java

```java
public class ErrorResponse {
    private int status;
    private String message;
    private long timestamp;
    private String path;
    
    // Constructors, Getters, Setters
    
    public ErrorResponse(int status, String message, long timestamp) {
        this.status = status;
        this.message = message;
        this.timestamp = timestamp;
    }
}
```

#### Custom Exceptions

java

```java
// Base exception
public class ResourceNotFoundException extends RuntimeException {
    public ResourceNotFoundException(String message) {
        super(message);
    }
}

public class UserNotFoundException extends ResourceNotFoundException {
    public UserNotFoundException(String message) {
        super(message);
    }
}

public class ProductNotFoundException extends ResourceNotFoundException {
    public ProductNotFoundException(String message) {
        super(message);
    }
}

public class DuplicateResourceException extends RuntimeException {
    public DuplicateResourceException(String message) {
        super(message);
    }
}

public class InvalidDataException extends RuntimeException {
    public InvalidDataException(String message) {
        super(message);
    }
}
```

#### Global Exception Handler

java

```java
@ControllerAdvice
public class GlobalExceptionHandler {
    
    // Handle Resource Not Found
    @ExceptionHandler(ResourceNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleResourceNotFound(
        ResourceNotFoundException ex,
        WebRequest request
    ) {
        ErrorResponse error = new ErrorResponse(
            HttpStatus.NOT_FOUND.value(),
            ex.getMessage(),
            System.currentTimeMillis()
        );
        error.setPath(request.getDescription(false).replace("uri=", ""));
        
        return new ResponseEntity<>(error, HttpStatus.NOT_FOUND);
    }
    
    // Handle Duplicate Resource
    @ExceptionHandler(DuplicateResourceException.class)
    public ResponseEntity<ErrorResponse> handleDuplicateResource(
        DuplicateResourceException ex,
        WebRequest request
    ) {
        ErrorResponse error = new ErrorResponse(
            HttpStatus.CONFLICT.value(),
            ex.getMessage(),
            System.currentTimeMillis()
        );
        error.setPath(request.getDescription(false).replace("uri=", ""));
        
        return new ResponseEntity<>(error, HttpStatus.CONFLICT);
    }
    
    // Handle Invalid Data
    @ExceptionHandler(InvalidDataException.class)
    public ResponseEntity<ErrorResponse> handleInvalidData(
        InvalidDataException ex,
        WebRequest request
    ) {
        ErrorResponse error = new ErrorResponse(
            HttpStatus.BAD_REQUEST.value(),
            ex.getMessage(),
            System.currentTimeMillis()
        );
        error.setPath(request.getDescription(false).replace("uri=", ""));
        
        return new ResponseEntity<>(error, HttpStatus.BAD_REQUEST);
    }
    
    // Handle Method Argument Not Valid (Validation Errors)
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<Map<String, Object>> handleValidationErrors(
        MethodArgumentNotValidException ex
    ) {
        Map<String, Object> errors = new HashMap<>();
        errors.put("timestamp", System.currentTimeMillis());
        errors.put("status", HttpStatus.BAD_REQUEST.value());
        
        Map<String, String> fieldErrors = new HashMap<>();
        ex.getBindingResult().getFieldErrors().forEach(error -> {
            fieldErrors.put(error.getField(), error.getDefaultMessage());
        });
        
        errors.put("errors", fieldErrors);
        
        return new ResponseEntity<>(errors, HttpStatus.BAD_REQUEST);
    }
    
    // Handle Missing Request Parameters
    @ExceptionHandler(MissingServletRequestParameterException.class)
    public ResponseEntity<ErrorResponse> handleMissingParams(
        MissingServletRequestParameterException ex
    ) {
        ErrorResponse error = new ErrorResponse(
            HttpStatus.BAD_REQUEST.value(),
            "Missing parameter: " + ex.getParameterName(),
            System.currentTimeMillis()
        );
        
        return new ResponseEntity<>(error, HttpStatus.BAD_REQUEST);
    }
    
    // Handle Type Mismatch
    @ExceptionHandler(MethodArgumentTypeMismatchException.class)
    public ResponseEntity<ErrorResponse> handleTypeMismatch(
        MethodArgumentTypeMismatchException ex
    ) {
        String message = String.format(
            "Parameter '%s' should be of type %s",
            ex.getName(),
            ex.getRequiredType().getSimpleName()
        );
        
        ErrorResponse error = new ErrorResponse(
            HttpStatus.BAD_REQUEST.value(),
            message,
            System.currentTimeMillis()
        );
        
        return new ResponseEntity<>(error, HttpStatus.BAD_REQUEST);
    }
    
    // Handle HTTP Message Not Readable
    @ExceptionHandler(HttpMessageNotReadableException.class)
    public ResponseEntity<ErrorResponse> handleHttpMessageNotReadable(
        HttpMessageNotReadableException ex
    ) {
        ErrorResponse error = new ErrorResponse(
            HttpStatus.BAD_REQUEST.value(),
            "Malformed JSON request",
            System.currentTimeMillis()
        );
        
        return new ResponseEntity<>(error, HttpStatus.BAD_REQUEST);
    }
    
    // Handle all other exceptions
    @ExceptionHandler(Exception.class)
    public ResponseEntity<ErrorResponse> handleGlobalException(
        Exception ex,
        WebRequest request
    ) {
        ErrorResponse error = new ErrorResponse(
            HttpStatus.INTERNAL_SERVER_ERROR.value(),
            "An unexpected error occurred: " + ex.getMessage(),
            System.currentTimeMillis()
        );
        error.setPath(request.getDescription(false).replace("uri=", ""));
        
        return new ResponseEntity<>(error, HttpStatus.INTERNAL_SERVER_ERROR);
    }
}
```

### Complete Example with Service Layer

java

```java
// Service Layer
@Service
public class UserService {
    
    @Autowired
    private UserRepository userRepository;
    
    public User findById(Long id) {
        return userRepository.findById(id)
            .orElseThrow(() -> new UserNotFoundException("User not found with id: " + id));
    }
    
    public User save(User user) {
        if (userRepository.existsByEmail(user.getEmail())) {
            throw new DuplicateResourceException("Email already exists: " + user.getEmail());
        }
        return userRepository.save(user);
    }
    
    public User update(Long id, User user) {
        User existing = findById(id);  // Throws exception if not found
        existing.setName(user.getName());
        existing.setEmail(user.getEmail());
        return userRepository.save(existing);
    }
    
    public void delete(Long id) {
        User user = findById(id);  // Throws exception if not found
        userRepository.delete(user);
    }
}

// Controller
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    @GetMapping("/{id}")
    public ResponseEntity<User> getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        return ResponseEntity.ok(user);
    }
    
    @PostMapping
    public ResponseEntity<User> createUser(@Valid @RequestBody User user) {
        User saved = userService.save(user);
        return ResponseEntity.status(HttpStatus.CREATED).body(saved);
    }
    
    @PutMapping("/{id}")
    public ResponseEntity<User> updateUser(
        @PathVariable Long id,
        @Valid @RequestBody User user
    ) {
        User updated = userService.update(id, user);
        return ResponseEntity.ok(updated);
    }
    
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteUser(@PathVariable Long id) {
        userService.delete(id);
        return ResponseEntity.noContent().build();
    }
}
```

### Testing Exception Handling

java

```java
@SpringBootTest
@AutoConfigureMockMvc
public class ExceptionHandlingTest {
    
    @Autowired
    private MockMvc mockMvc;
    
    @Test
    public void testUserNotFound() throws Exception {
        mockMvc.perform(get("/api/users/999"))
            .andExpect(status().isNotFound())
            .andExpect(jsonPath("$.status").value(404))
            .andExpect(jsonPath("$.message").value("User not found with id: 999"));
    }
    
    @Test
    public void testDuplicateEmail() throws Exception {
        String userJson = """
            {
                "name": "John Doe",
                "email": "existing@example.com"
            }
            """;
        
        mockMvc.perform(post("/api/users")
                .contentType(MediaType.APPLICATION_JSON)
                .content(userJson))
            .andExpect(status().isConflict())
            .andExpect(jsonPath("$.status").value(409));
    }
}
```

----------

## Validations on Request Body

### What is Validation?

Validating incoming data to ensure it meets required criteria before processing.

### Analogy üö™

Think of Validation as a  **Security Checkpoint**:

-   Check ID (not null)
-   Verify age (minimum/maximum)
-   Scan bags (format validation)
-   Reject invalid entries (throw exception)

### Setup

#### Add Dependency

xml

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-validation</artifactId>
</dependency>
```

### Common Validation Annotations

#### 1. Basic Validations

java

```java
import jakarta.validation.constraints.*;

public class User {
    
    private Long id;
    
    @NotNull(message = "Name cannot be null")
    @NotEmpty(message = "Name cannot be empty")
    @NotBlank(message = "Name cannot be blank")
    private String name;
    
    @Email(message = "Invalid email format")
    @NotBlank(message = "Email is required")
    private String email;
    
    @Min(value = 18, message = "Age must be at least 18")
    @Max(value = 100, message = "Age must be less than 100")
    private Integer age;
    
    @Size(min = 8, max = 20, message = "Password must be between 8 and 20 characters")
    private String password;
    
    @Pattern(regexp = "^[0-9]{10}$", message = "Phone must be 10 digits")
    private String phone;
    
    @Positive(message = "Salary must be positive")
    private Double salary;
    
    @PastOrPresent(message = "Birth date cannot be in future")
    private LocalDate birthDate;
    
    @Future(message = "Join date must be in future")
    private LocalDate joinDate;
    
    // Getters and Setters
}
```

#### 2. Using @Valid in Controller

java

```java
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @PostMapping
    public ResponseEntity<User> createUser(@Valid @RequestBody User user) {
        // If validation fails, MethodArgumentNotValidException is thrown
        User saved = userService.save(user);
        return ResponseEntity.status(HttpStatus.CREATED).body(saved);
    }
    
    @PutMapping("/{id}")
    public ResponseEntity<User> updateUser(
        @PathVariable Long id,
        @Valid @RequestBody User user
    ) {
        User updated = userService.update(id, user);
        return ResponseEntity.ok(updated);
    }
}
```

### Complete Validation Example

#### User Model with Validations

java

```java
public class User {
    
    private Long id;
    
    @NotBlank(message = "Name is required")
    @Size(min = 2, max = 50, message = "Name must be between 2 and 50 characters")
    private String name;
    
    @NotBlank(message = "Email is required")
    @Email(message = "Email should be valid")
    private String email;
    
    @NotBlank(message = "Password is required")
    @Size(min = 8, message = "Password must be at least 8 characters")
    @Pattern(
        regexp = "^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).*$",
        message = "Password must contain at least one digit, one lowercase, one uppercase, and one special character"
    )
    private String password;
    
    @NotNull(message = "Age is required")
    @Min(value = 18, message = "Age must be at least 18")
    @Max(value = 120, message = "Age must be less than 120")
    private Integer age;
    
    @Pattern(regexp = "^[0-9]{10}$", message = "Phone number must be 10 digits")
    private String phone;
    
    @NotNull(message = "Salary is required")
    @Positive(message = "Salary must be positive")
    @DecimalMin(value = "0.0", inclusive = false, message = "Salary must be greater than 0")
    private Double salary;
    
    @PastOrPresent(message = "Birth date cannot be in the future")
    private LocalDate birthDate;
    
    @NotNull(message = "Active status is required")
    private Boolean active;
    
    // Getters and Setters
}
```

#### Product Model with Validations

java

```java
public class Product {
    
    private Long id;
    
    @NotBlank(message = "Product name is required")
    @Size(min = 3, max = 100, message = "Product name must be between 3 and 100 characters")
    private String name;
    
    @NotBlank(message = "Description is required")
    @Size(max = 500, message = "Description must not exceed 500 characters")
    private String description;
    
    @NotNull(message = "Price is required")
    @DecimalMin(value = "0.01", message = "Price must be greater than 0")
    @Digits(integer = 10, fraction = 2, message = "Price must have at most 10 digits and 2 decimal places")
    private Double price;
    
    @NotNull(message = "Stock quantity is required")
    @Min(value = 0, message = "Stock cannot be negative")
    private Integer stock;
    
    @NotBlank(message = "Category is required")
    private String category;
    
    @NotNull(message = "Available status is required")
    private Boolean available;
    
    // Getters and Setters
}
```

### Custom Validation

#### Custom Annotation

java

```java
@Target({ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = AgeValidator.class)
public @interface ValidAge {
    String message() default "Invalid age";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
}
```

#### Custom Validator

java

```java
public class AgeValidator implements ConstraintValidator<ValidAge, Integer> {
    
    @Override
    public boolean isValid(Integer age, ConstraintValidatorContext context) {
        if (age == null) {
            return false;
        }
        return age >= 18 && age <= 100;
    }
}
```

#### Usage

java

```java
public class User {
    
    @ValidAge(message = "Age must be between 18 and 100")
    private Integer age;
    
    // Other fields
}
```

### Validation Groups

java

```java
public interface CreateValidation {}
public interface UpdateValidation {}

public class User {
    
    @Null(groups = CreateValidation.class, message = "ID must be null for creation")
    @NotNull(groups = UpdateValidation.class, message = "ID is required for update")
    private Long id;
    
    @NotBlank(groups = {CreateValidation.class, UpdateValidation.class})
    private String name;
    
    // Other fields
}

// In Controller
@PostMapping
public ResponseEntity<User> createUser(
    @Validated(CreateValidation.class) @RequestBody User user
) {
    return ResponseEntity.ok(userService.save(user));
}

@PutMapping("/{id}")
public ResponseEntity<User> updateUser(
    @PathVariable Long id,
    @Validated(UpdateValidation.class) @RequestBody User user
) {
    return ResponseEntity.ok(userService.update(id, user));
}
```

### Handling Validation Errors

java

```java
@ControllerAdvice
public class ValidationExceptionHandler {
    
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<Map<String, Object>> handleValidationErrors(
        MethodArgumentNotValidException ex
    ) {
        Map<String, Object> response = new HashMap<>();
        response.put("timestamp", System.currentTimeMillis());
        response.put("status", HttpStatus.BAD_REQUEST.value());
        response.put("error", "Validation Failed");
        
        Map<String, String> errors = new HashMap<>();
        ex.getBindingResult().getFieldErrors().forEach(error -> {
            errors.put(error.getField(), error.getDefaultMessage());
        });
        
        response.put("validationErrors", errors);
        
        return new ResponseEntity<>(response, HttpStatus.BAD_REQUEST);
    }
}
```

### Validation Error Response Example

**Request:**

json

```json
POST /api/users
{
  "name": "J",
  "email": "invalid-email",
  "age": 15,
  "password": "123"
}
```

**Response:**

json

```json
{
  "timestamp": 1698765432000,
  "status": 400,
  "error": "Validation Failed",
  "validationErrors": {
    "name": "Name must be between 2 and 50 characters",
    "email": "Email should be valid",
    "age": "Age must be at least 18",
    "password": "Password must be at least 8 characters"
  }
}
```

----------

## View Resolvers

### What is a View Resolver?

View Resolvers map logical view names to actual view files (JSP, Thymeleaf, etc.).

### Analogy üó∫Ô∏è

Think of View Resolver as a  **GPS Navigator**:

-   You say "Home" (logical name)
-   GPS finds actual address (view file path)
-   Takes you there (renders the view)

### Types of View Resolvers

#### 1. InternalResourceViewResolver (JSP)

**Configuration:**

java

```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {
    
    @Bean
    public InternalResourceViewResolver viewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        return resolver;
    }
}
```

**Or in application.properties:**

properties

```properties
spring.mvc.view.prefix=/WEB-INF/views/
spring.mvc.view.suffix=.jsp
```

**How it Works:**

```
Controller returns: "home"
View Resolver converts to: /WEB-INF/views/home.jsp
```

#### 2. ThymeleafViewResolver

**Add Dependency:**

xml

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-thymeleaf</artifactId>
</dependency>
```

**Configuration (Auto-configured in Spring Boot):**

properties

```properties
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.cache=false
```

**How it Works:**

```
Controller returns: "home"
View Resolver converts to: classpath:/templates/home.html
```

### Example with JSP

#### Project Structure

```
src/main/
  ‚îú‚îÄ‚îÄ java/
  ‚îÇ   ‚îî‚îÄ‚îÄ com/example/
  ‚îÇ       ‚îú‚îÄ‚îÄ controller/
  ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ UserController.java
  ‚îÇ       ‚îî‚îÄ‚îÄ model/
  ‚îÇ           ‚îî‚îÄ‚îÄ User.java
  ‚îî‚îÄ‚îÄ webapp/
      ‚îî‚îÄ‚îÄ WEB-INF/
          ‚îî‚îÄ‚îÄ views/
              ‚îú‚îÄ‚îÄ home.jsp
              ‚îú‚îÄ‚îÄ userList.jsp
              ‚îî‚îÄ‚îÄ userForm.jsp
```

#### Controller

java

```java
@Controller
@RequestMapping("/users")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    // Returns view name "home"
    @GetMapping("/home")
    public String home(Model model) {
        model.addAttribute("message", "Welcome to User Management");
        return "home";  // Resolves to /WEB-INF/views/home.jsp
    }
    
    // Returns view name "userList"
    @GetMapping
    public String listUsers(Model model) {
        List<User> users = userService.findAll();
        model.addAttribute("users", users);
        return "userList";  // Resolves to /WEB-INF/views/userList.jsp
    }
    
    // Returns view name "userForm"
    @GetMapping("/new")
    public String showCreateForm(Model model) {
        model.addAttribute("user", new User());
        return "userForm";  // Resolves to /WEB-INF/views/userForm.jsp
    }
}
```

#### home.jsp

jsp

```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>Home</title>
</head>
<body>
    <h1>${message}</h1>
    <a href="/users">View All Users</a>
</body>
</html>
```

#### userList.jsp

jsp

```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
<head>
    <title>User List</title>
</head>
<body>
    <h1>User List</h1>
    <table border="1">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
        </tr>
        <c:forEach items="${users}" var="user">
            <tr>
                <td>${user.id}</td>
                <td>${user.name}</td>
                <td>${user.email}</td>
            </tr>
        </c:forEach>
    </table>
    <br/>
    <a href="/users/new">Add New User</a>
</body>
</html>
```

### Example with Thymeleaf

#### Project Structure

```
src/main/
  ‚îú‚îÄ‚îÄ java/
  ‚îÇ   ‚îî‚îÄ‚îÄ com/example/
  ‚îÇ       ‚îî‚îÄ‚îÄ controller/
  ‚îÇ           ‚îî‚îÄ‚îÄ ProductController.java
  ‚îî‚îÄ‚îÄ resources/
      ‚îî‚îÄ‚îÄ templates/
          ‚îú‚îÄ‚îÄ home.html
          ‚îú‚îÄ‚îÄ productList.html
          ‚îî‚îÄ‚îÄ productForm.html
```

#### Controller

java

```java
@Controller
@RequestMapping("/products")
public class ProductController {
    
    @Autowired
    private ProductService productService;
    
    @GetMapping
    public String listProducts(Model model) {
        model.addAttribute("products", productService.findAll());
        return "productList";  // Resolves to templates/productList.html
    }
    
    @GetMapping("/new")
    public String showCreateForm(Model model) {
        model.addAttribute("product", new Product());
        return "productForm";  // Resolves to templates/productForm.html
    }
}
```

#### productList.html (Thymeleaf)

html

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Product List</title>
</head>
<body>
    <h1>Product List</h1>
    <table border="1">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Price</th>
        </tr>
        <tr th:each="product : ${products}">
            <td th:text="${product.id}"></td>
            <td th:text="${product.name}"></td>
            <td th:text="${product.price}"></td>
        </tr>
    </table>
    <br/>
    <a th:href="@{/products/new}">Add New Product</a>
</body>
</html>
```

----------

## Form-Based Application

### Complete Form Example

#### 1. Model Class

java

```java
public class User {
    private Long id;
    
    @NotBlank(message = "Name is required")
    private String name;
    
    @Email(message = "Invalid email")
    private String email;
    
    @Min(value = 18, message = "Age must be at least 18")
    private Integer age;
    
    private String gender;
    private String country;
    private List<String> hobbies;
    
    // Getters and Setters
}
```

#### 2. Controller

java

```java
@Controller
@RequestMapping("/users")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    // Show form
    @GetMapping("/new")
    public String showForm(Model model) {
        model.addAttribute("user", new User());
        model.addAttribute("countries", Arrays.asList("India", "USA", "UK", "Canada"));
        model.addAttribute("hobbies", Arrays.asList("Reading", "Sports", "Music", "Gaming"));
        return "userForm";
    }
    
    // Handle form submission
    @PostMapping
    public String createUser(@Valid @ModelAttribute("user") User user,
                           BindingResult result,
                           Model model) {
        if (result.hasErrors()) {
            // If validation fails, return to form with errors
            model.addAttribute("countries", Arrays.asList("India", "USA", "UK", "Canada"));
            model.addAttribute("hobbies", Arrays.asList("Reading", "Sports", "Music", "Gaming"));
            return "userForm";
        }
        
        userService.save(user);
        return "redirect:/users";  // Redirect to list page
    }
    
    // Show all users
    @GetMapping
    public String listUsers(Model model) {
        model.addAttribute("users", userService.findAll());
        return "userList";
    }
    
    // Show edit form
    @GetMapping("/edit/{id}")
    public String showEditForm(@PathVariable Long id, Model model) {
        User user = userService.findById(id);
        model.addAttribute("user", user);
        model.addAttribute("countries", Arrays.asList("India", "USA", "UK", "Canada"));
        model.addAttribute("hobbies", Arrays.asList("Reading", "Sports", "Music", "Gaming"));
        return "userForm";
    }
    
    // Handle update
    @PostMapping("/update/{id}")
    public String updateUser(@PathVariable Long id,
                           @Valid @ModelAttribute("user") User user,
                           BindingResult result,
                           Model model) {
        if (result.hasErrors()) {
            model.addAttribute("countries", Arrays.asList("India", "USA", "UK", "Canada"));
            model.addAttribute("hobbies", Arrays.asList("Reading", "Sports", "Music", "Gaming"));
            return "userForm";
        }
        
        user.setId(id);
        userService.update(user);
        return "redirect:/users";
    }
    
    // Handle delete
    @GetMapping("/delete/{id}")
    public String deleteUser(@PathVariable Long id) {
        userService.delete(id);
        return "redirect:/users";
    }
}
```

#### 3. Form View (userForm.html - Thymeleaf)

html

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>User Form</title>
    <style>
        .error { color: red; }
        .form-group { margin-bottom: 15px; }
        label { display: inline-block; width: 150px; }
    </style>
</head>
<body>
    <h1 th:text="${user.id == null} ? 'Create User' : 'Edit User'"></h1>
    
    <form th:action="@{${user.id == null} ? '/users' : '/users/update/' + ${user.id}}" 
          th:object="${user}" 
          method="post">
        
        <!-- Name Field -->
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" th:field="*{name}" />
            <span class="error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></span>
        </div>
        
        <!-- Email Field -->
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" th:field="*{email}" />
            <span class="error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></span>
        </div>
        
        <!-- Age Field -->
        <div class="form-group">
            <label for="age">Age:</label>
            <input type="number" id="age" th:field="*{age}" />
            <span class="error" th:if="${#fields.hasErrors('age')}" th:errors="*{age}"></span>
        </div>
        
        <!-- Gender Radio Buttons -->
        <div class="form-group">
            <label>Gender:</label>
            <input type="radio" th:field="*{gender}" value="Male" /> Male
            <input type="radio" th:field="*{gender}" value="Female" /> Female
            <input type="radio" th:field="*{gender}" value="Other" /> Other
        </div>
        
        <!-- Country Dropdown -->
        <div class="form-group">
            <label for="country">Country:</label>
            <select id="country" th:field="*{country}">
                <option value="">Select Country</option>
                <option th:each="c : ${countries}" th:value="${c}" th:text="${c}"></option>
            </select>
        </div>
        
        <!-- Hobbies Checkboxes -->
        <div class="form-group">
            <label>Hobbies:</label>
            <div th:each="hobby : ${hobbies}">
                <input type="checkbox" th:field="*{hobbies}" th:value="${hobby}" />
                <label th:text="${hobby}"></label>
            </div>
        </div>
        
        <!-- Submit Button -->
        <div class="form-group">
            <button type="submit" th:text="${user.id == null} ? 'Create' : 'Update'"></button>
            <a th:href="@{/users}">Cancel</a>
        </div>
    </form>
</body>
</html>
```

#### 4. List View (userList.html - Thymeleaf)

html

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>User List</title>
    <style>
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid black; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>User List</h1>
    
    <a th:href="@{/users/new}">Add New User</a>
    <br/><br/>
    
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Age</th>
                <th>Gender</th>
                <th>Country</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="user : ${users}">
                <td th:text="${user.id}"></td>
                <td th:text="${user.name}"></td>
                <td th:text="${user.email}"></td>
                <td th:text="${user.age}"></td>
                <td th:text="${user.gender}"></td>
                <td th:text="${user.country}"></td>
                <td>
                    <a th:href="@{/users/edit/{id}(id=${user.id})}">Edit</a> |
                    <a th:href="@{/users/delete/{id}(id=${user.id})}" 
                       onclick="return confirm('Are you sure?')">Delete</a>
                </td>
            </tr>
        </tbody>
    </table>
    
    <p th:if="${#lists.isEmpty(users)}">No users found.</p>
</body>
</html>
```

#### 5. Form with JSP Alternative

**userForm.jsp:**

jsp

```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
<head>
    <title>User Form</title>
    <style>
        .error { color: red; }
        .form-group { margin-bottom: 15px; }
        label { display: inline-block; width: 150px; }
    </style>
</head>
<body>
    <h1>${user.id == null ? 'Create User' : 'Edit User'}</h1>
    
    <form:form action="${user.id == null ? '/users' : '/users/update/'.concat(user.id)}" 
               modelAttribute="user" method="post">
        
        <!-- Name Field -->
        <div class="form-group">
            <label for="name">Name:</label>
            <form:input path="name" id="name" />
            <form:errors path="name" cssClass="error" />
        </div>
        
        <!-- Email Field -->
        <div class="form-group">
            <label for="email">Email:</label>
            <form:input path="email" id="email" type="email" />
            <form:errors path="email" cssClass="error" />
        </div>
        
        <!-- Age Field -->
        <div class="form-group">
            <label for="age">Age:</label>
            <form:input path="age" id="age" type="number" />
            <form:errors path="age" cssClass="error" />
        </div>
        
        <!-- Gender Radio Buttons -->
        <div class="form-group">
            <label>Gender:</label>
            <form:radiobutton path="gender" value="Male" /> Male
            <form:radiobutton path="gender" value="Female" /> Female
            <form:radiobutton path="gender" value="Other" /> Other
        </div>
        
        <!-- Country Dropdown -->
        <div class="form-group">
            <label for="country">Country:</label>
            <form:select path="country" id="country">
                <form:option value="">Select Country</form:option>
                <form:options items="${countries}" />
            </form:select>
        </div>
        
        <!-- Hobbies Checkboxes -->
        <div class="form-group">
            <label>Hobbies:</label>
            <form:checkboxes path="hobbies" items="${hobbies}" />
        </div>
        
        <!-- Submit Button -->
        <div class="form-group">
            <button type="submit">${user.id == null ? 'Create' : 'Update'}</button>
            <a href="/users">Cancel</a>
        </div>
    </form:form>
</body>
</html>
```

### Sending Request from UI to Controller

#### Various Form Submission Methods

**1. Standard Form Submission (GET/POST only)**

html

```html
<!-- GET Request -->
<form action="/users/search" method="get">
    <input type="text" name="name" placeholder="Search by name" />
    <button type="submit">Search</button>
</form>

<!-- POST Request -->
<form action="/users" method="post">
    <input type="text" name="name" />
    <input type="email" name="email" />
    <button type="submit">Create</button>
</form>
```

**2. Using JavaScript/AJAX (All HTTP Methods)**

html

```html
<!DOCTYPE html>
<html>
<head>
    <title>AJAX Example</title>
    <script>
        // GET Request
        function getUser(userId) {
            fetch('/api/users/' + userId)
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    document.getElementById('result').innerHTML = 
                        'Name: ' + data.name + ', Email: ' + data.email;
                })
                .catch(error => console.error('Error:', error));
        }
        
        // POST Request
        function createUser() {
            const userData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                age: document.getElementById('age').value
            };
            
            fetch('/api/users', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(userData)
            })
            .then(response => response.json())
            .then(data => {
                alert('User created with ID: ' + data.id);
                loadUsers();
            })
            .catch(error => console.error('Error:', error));
        }
        
        // PUT Request
        function updateUser(userId) {
            const userData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                age: document.getElementById('age').value
            };
            
            fetch('/api/users/' + userId, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(userData)
            })
            .then(response => response.json())
            .then(data => {
                alert('User updated successfully');
                loadUsers();
            })
            .catch(error => console.error('Error:', error));
        }
        
        // DELETE Request
        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user?')) {
                fetch('/api/users/' + userId, {
                    method: 'DELETE'
                })
                .then(response => {
                    if (response.ok) {
                        alert('User deleted successfully');
                        loadUsers();
                    }
                })
                .catch(error => console.error('Error:', error));
            }
        }
        
        // Load all users
        function loadUsers() {
            fetch('/api/users')
                .then(response => response.json())
                .then(users => {
                    let html = '<table border="1"><tr><th>ID</th><th>Name</th><th>Email</th><th>Actions</th></tr>';
                    users.forEach(user => {
                        html += `<tr>
                            <td>${user.id}</td>
                            <td>${user.name}</td>
                            <td>${user.email}</td>
                            <td>
                                <button onclick="editUser(${user.id})">Edit</button>
                                <button onclick="deleteUser(${user.id})">Delete</button>
                            </td>
                        </tr>`;
                    });
                    html += '</table>';
                    document.getElementById('userList').innerHTML = html;
                })
                .catch(error => console.error('Error:', error));
        }
        
        // Load user for editing
        function editUser(userId) {
            fetch('/api/users/' + userId)
                .then(response => response.json())
                .then(user => {
                    document.getElementById('userId').value = user.id;
                    document.getElementById('name').value = user.name;
                    document.getElementById('email').value = user.email;
                    document.getElementById('age').value = user.age;
                    document.getElementById('submitBtn').textContent = 'Update';
                })
                .catch(error => console.error('Error:', error));
        }
        
        // Handle form submission
        function handleSubmit() {
            const userId = document.getElementById('userId').value;
            if (userId) {
                updateUser(userId);
            } else {
                createUser();
            }
        }
        
        // Load users on page load
        window.onload = function() {
            loadUsers();
        };
    </script>
</head>
<body>
    <h1>User Management</h1>
    
    <!-- Form Section -->
    <div>
        <h2>Create/Update User</h2>
        <input type="hidden" id="userId" />
        <input type="text" id="name" placeholder="Name" /><br/>
        <input type="email" id="email" placeholder="Email" /><br/>
        <input type="number" id="age" placeholder="Age" /><br/>
        <button id="submitBtn" onclick="handleSubmit()">Create</button>
        <button onclick="clearForm()">Clear</button>
    </div>
    
    <!-- Results Section -->
    <div id="result"></div>
    
    <!-- User List Section -->
    <div>
        <h2>User List</h2>
        <div id="userList"></div>
    </div>
    
    <script>
        function clearForm() {
            document.getElementById('userId').value = '';
            document.getElementById('name').value = '';
            document.getElementById('email').value = '';
            document.getElementById('age').value = '';
            document.getElementById('submitBtn').textContent = 'Create';
        }
    </script>
</body>
</html>
```

**3. Using jQuery AJAX**

html

```html
<!DOCTYPE html>
<html>
<head>
    <title>jQuery AJAX Example</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // Load users on page load
            loadUsers();
            
            // Handle form submission
            $('#userForm').submit(function(e) {
                e.preventDefault();
                
                var userData = {
                    name: $('#name').val(),
                    email: $('#email').val(),
                    age: $('#age').val()
                };
                
                var userId = $('#userId').val();
                
                if (userId) {
                    // Update existing user
                    $.ajax({
                        url: '/api/users/' + userId,
                        type: 'PUT',
                        contentType: 'application/json',
                        data: JSON.stringify(userData),
                        success: function(response) {
                            alert('User updated successfully');
                            clearForm();
                            loadUsers();
                        },
                        error: function(xhr) {
                            alert('Error: ' + xhr.responseText);
                        }
                    });
                } else {
                    // Create new user
                    $.ajax({
                        url: '/api/users',
                        type: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify(userData),
                        success: function(response) {
                            alert('User created successfully');
                            clearForm();
                            loadUsers();
                        },
                        error: function(xhr) {
                            alert('Error: ' + xhr.responseText);
                        }
                    });
                }
            });
        });
        
        function loadUsers() {
            $.ajax({
                url: '/api/users',
                type: 'GET',
                success: function(users) {
                    var html = '<table border="1">';
                    html += '<tr><th>ID</th><th>Name</th><th>Email</th><th>Actions</th></tr>';
                    
                    $.each(users, function(index, user) {
                        html += '<tr>';
                        html += '<td>' + user.id + '</td>';
                        html += '<td>' + user.name + '</td>';
                        html += '<td>' + user.email + '</td>';
                        html += '<td>';
                        html += '<button onclick="editUser(' + user.id + ')">Edit</button> ';
                        html += '<button onclick="deleteUser(' + user.id + ')">Delete</button>';
                        html += '</td>';
                        html += '</tr>';
                    });
                    
                    html += '</table>';
                    $('#userList').html(html);
                }
            });
        }
        
        function editUser(userId) {
            $.ajax({
                url: '/api/users/' + userId,
                type: 'GET',
                success: function(user) {
                    $('#userId').val(user.id);
                    $('#name').val(user.name);
                    $('#email').val(user.email);
                    $('#age').val(user.age);
                    $('#submitBtn').text('Update');
                }
            });
        }
        
        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user?')) {
                $.ajax({
                    url: '/api/users/' + userId,
                    type: 'DELETE',
                    success: function() {
                        alert('User deleted successfully');
                        loadUsers();
                    },
                    error: function(xhr) {
                        alert('Error: ' + xhr.responseText);
                    }
                });
            }
        }
        
        function clearForm() {
            $('#userId').val('');
            $('#name').val('');
            $('#email').val('');
            $('#age').val('');
            $('#submitBtn').text('Create');
        }
    </script>
</head>
<body>
    <h1>User Management</h1>
    
    <form id="userForm">
        <input type="hidden" id="userId" />
        <input type="text" id="name" placeholder="Name" required /><br/>
        <input type="email" id="email" placeholder="Email" required /><br/>
        <input type="number" id="age" placeholder="Age" required /><br/>
        <button type="submit" id="submitBtn">Create</button>
        <button type="button" onclick="clearForm()">Clear</button>
    </form>
    
    <h2>User List</h2>
    <div id="userList"></div>
</body>
</html>
```

### Sending Response from Controller to UI

#### 1. Returning Model and View (Traditional MVC)

java

```java
@Controller
@RequestMapping("/users")
public class UserController {
    
    @GetMapping
    public String listUsers(Model model) {
        List<User> users = userService.findAll();
        model.addAttribute("users", users);
        model.addAttribute("message", "Total users: " + users.size());
        return "userList";  // Returns view name
    }
    
    @GetMapping("/{id}")
    public String getUserDetails(@PathVariable Long id, Model model) {
        User user = userService.findById(id);
        model.addAttribute("user", user);
        return "userDetails";
    }
}
```

#### 2. Returning JSON Response (REST API)

java

```java
@RestController
@RequestMapping("/api/users")
public class UserRestController {
    
    // Automatically converts to JSON
    @GetMapping
    public List<User> getAllUsers() {
        return userService.findAll();
    }
    
    @GetMapping("/{id}")
    public User getUser(@PathVariable Long id) {
        return userService.findById(id);
    }
    
    // With ResponseEntity (more control)
    @GetMapping("/{id}/details")
    public ResponseEntity<User> getUserWithStatus(@PathVariable Long id) {
        User user = userService.findById(id);
        if (user == null) {
            return ResponseEntity.notFound().build();
        }
        return ResponseEntity.ok(user);
    }
}
```

#### 3. Custom Response Format

java

```java
// Response wrapper class
public class ApiResponse<T> {
    private boolean success;
    private String message;
    private T data;
    private long timestamp;
    
    // Constructors, Getters, Setters
    
    public static <T> ApiResponse<T> success(T data, String message) {
        ApiResponse<T> response = new ApiResponse<>();
        response.setSuccess(true);
        response.setMessage(message);
        response.setData(data);
        response.setTimestamp(System.currentTimeMillis());
        return response;
    }
    
    public static <T> ApiResponse<T> error(String message) {
        ApiResponse<T> response = new ApiResponse<>();
        response.setSuccess(false);
        response.setMessage(message);
        response.setTimestamp(System.currentTimeMillis());
        return response;
    }
}

// Controller using custom response
@RestController
@RequestMapping("/api/users")
public class UserRestController {
    
    @GetMapping
    public ResponseEntity<ApiResponse<List<User>>> getAllUsers() {
        List<User> users = userService.findAll();
        ApiResponse<List<User>> response = ApiResponse.success(users, "Users retrieved successfully");
        return ResponseEntity.ok(response);
    }
    
    @PostMapping
    public ResponseEntity<ApiResponse<User>> createUser(@Valid @RequestBody User user) {
        User saved = userService.save(user);
        ApiResponse<User> response = ApiResponse.success(saved, "User created successfully");
        return ResponseEntity.status(HttpStatus.CREATED).body(response);
    }
}
```

**Response Format:**

json

```json
{
  "success": true,
  "message": "Users retrieved successfully",
  "data": [
    {
      "id": 1,
      "name": "John Doe",
      "email": "john@example.com"
    }
  ],
  "timestamp": 1698765432000
}
```

#### 4. Pagination Response

java

```java
// Page response wrapper
public class PageResponse<T> {
    private List<T> content;
    private int pageNumber;
    private int pageSize;
    private long totalElements;
    private int totalPages;
    private boolean first;
    private boolean last;
    
    // Constructors, Getters, Setters
}

// Controller with pagination
@RestController
@RequestMapping("/api/users")
public class UserRestController {
    
    @GetMapping
    public ResponseEntity<PageResponse<User>> getUsers(
        @RequestParam(defaultValue = "0") int page,
        @RequestParam(defaultValue = "10") int size
    ) {
        Page<User> userPage = userService.findAll(PageRequest.of(page, size));
        
        PageResponse<User> response = new PageResponse<>();
        response.setContent(userPage.getContent());
        response.setPageNumber(userPage.getNumber());
        response.setPageSize(userPage.getSize());
        response.setTotalElements(userPage.getTotalElements());
        response.setTotalPages(userPage.getTotalPages());
        response.setFirst(userPage.isFirst());
        response.setLast(userPage.isLast());
        
        return ResponseEntity.ok(response);
    }
}
```

#### 5. File Download Response

java

```java
@RestController
@RequestMapping("/api/files")
public class FileController {
    
    @GetMapping("/download/{filename}")
    public ResponseEntity<Resource> downloadFile(@PathVariable String filename) {
        try {
            Path filePath = Paths.get("uploads").resolve(filename);
            Resource resource = new UrlResource(filePath.toUri());
            
            if (resource.exists()) {
                return ResponseEntity.ok()
                    .header(HttpHeaders.CONTENT_DISPOSITION, 
                           "attachment; filename=\"" + resource.getFilename() + "\"")
                    .body(resource);
            } else {
                return ResponseEntity.notFound().build();
            }
        } catch (Exception e) {
            return ResponseEntity.internalServerError().build();
        }
    }
    
    // Download as byte array
    @GetMapping("/download-bytes/{filename}")
    public ResponseEntity<byte[]> downloadFileAsBytes(@PathVariable String filename) {
        byte[] fileData = fileService.getFileData(filename);
        
        return ResponseEntity.ok()
            .header(HttpHeaders.CONTENT_TYPE, "application/octet-stream")
            .header(HttpHeaders.CONTENT_DISPOSITION, 
                   "attachment; filename=\"" + filename + "\"")
            .body(fileData);
    }
}
```

----------

## Complete End-to-End Example

### Project Structure

```
spring-boot-rest-app/
‚îú‚îÄ‚îÄ src/main/
‚îÇ   ‚îú‚îÄ‚îÄ java/com/example/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SpringBootRestApplication.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserController.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserRestController.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ User.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserRepository.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserService.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserServiceImpl.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exception/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserNotFoundException.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DuplicateEmailException.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GlobalExceptionHandler.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserDTO.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ApiResponse.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ErrorResponse.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ SwaggerConfig.java
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ RestTemplateConfig.java
‚îÇ   ‚îî‚îÄ‚îÄ resources/
‚îÇ       ‚îú‚îÄ‚îÄ application.properties
‚îÇ       ‚îî‚îÄ‚îÄ templates/
‚îÇ           ‚îú‚îÄ‚îÄ userList.html
‚îÇ           ‚îî‚îÄ‚îÄ userForm.html
‚îî‚îÄ‚îÄ pom.xml
```

### Complete Code Files

**1. pom.xml**

xml

```xml
<dependencies>
    <!-- Spring Boot Starter Web -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    
    <!-- Spring Boot Starter Data JPA -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-jpa</artifactId>
    </dependency>
    
    <!-- H2 Database -->
    <dependency>
        <groupId>com.h2database</groupId>
        <artifactId>h2</artifactId>
        <scope>runtime</scope>
    </dependency>
    
    <!-- Validation -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-validation</artifactId>
    </dependency>
    
    <!-- Thymeleaf -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-thymeleaf</artifactId>
    </dependency>
    
    <!-- Swagger/OpenAPI -->
    <dependency>
        <groupId>org.springdoc</groupId>
        <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
        <version>2.2.0</version>
    </dependency>
    
    <!-- Lombok (Optional) -->
    <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
        <optional>true</optional>
    </dependency>
</dependencies>
```

**2. application.properties**

properties

```properties
# Server Configuration
server.port=8080

# H2 Database
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# H2 Console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Thymeleaf
spring.thymeleaf.cache=false

# Swagger
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/api-docs
```

**3. User.java (Model)**

java

```java
@Entity
@Table(name = "users")
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @NotBlank(message = "Name is required")
    @Size(min = 2, max = 50, message = "Name must be between 2 and 50 characters")
    @Column(nullable = false)
    private String name;
    
    @NotBlank(message = "Email is required")
    @Email(message = "Email should be valid")
    @Column(nullable = false, unique = true)
    private String email;
    
    @NotNull(message = "Age is required")
    @Min(value = 18, message = "Age must be at least 18")
    @Max(value = 120, message = "Age must be less than 120")
    private Integer age;
    
    @Column(name = "created_at")
    private LocalDateTime createdAt;
    
    @Column(name = "updated_at")
    private LocalDateTime updatedAt;
    
    @PrePersist
    protected void onCreate() {
        createdAt = LocalDateTime.now();
    }
    
    @PreUpdate
    protected void onUpdate() {
        updatedAt = LocalDateTime.now();
    }
    
    // Constructors
    public User() {}
    
    public User(String name, String email, Integer age) {
        this.name = name;
        this.email = email;
        this.age = age;
    }
    
    // Getters and Setters
    // ... (generate all getters and setters)
}
```

This comprehensive tutorial covers all the topics you requested with:

-   **Theory**: Detailed explanations of concepts
-   **Analogies**: Memory aids for better understanding
-   **Visual representations**: Diagrams and structures
-   **Simple examples**: Easy-to-follow code samples
-   **Complete implementations**: Real-world, working code

You can use this as a complete learning resource for REST APIs and Spring Boot development!
